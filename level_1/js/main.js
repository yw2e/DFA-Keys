"use strict";!function(e,t,n){function r(n){o[n]||(o[n]=!0,e.migrateWarnings.push(n),t.console&&console.warn&&!e.migrateMute&&(console.warn("JQMIGRATE: "+n),e.migrateTrace&&console.trace&&console.trace()))}function a(t,n,a,o){if(Object.defineProperty)try{return void Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return r(o),a},set:function(e){r(o),a=e}})}catch(e){}e._definePropertyBroken=!0,t[n]=a}var o={};e.migrateWarnings=[],!e.migrateMute&&t.console&&console.log&&console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){o={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var i=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,c=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},l=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},u=/^(?:input|button)$/i,d=/^[238]$/,C=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,_=/^(?:checked|selected)$/i;a(e,"attrFn",i||{},"jQuery.attrFn is deprecated"),e.attr=function(t,a,o,c){var l=a.toLowerCase(),p=t&&t.nodeType;return c&&(s.length<4&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(p)&&(i?a in i:e.isFunction(e.fn[a])))?e(t)[a](o):("type"===a&&o!==n&&u.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[l]&&C.test(l)&&(e.attrHooks[l]={get:function(t,r){var a,o=e.prop(t,r);return!0===o||"boolean"!=typeof o&&(a=t.getAttributeNode(r))&&!1!==a.nodeValue?r.toLowerCase():n},set:function(t,n,r){var a;return!1===n?e.removeAttr(t,r):((a=e.propFix[r]||r)in t&&(t[a]=!0),t.setAttribute(r,r.toLowerCase())),r}},_.test(l)&&r("jQuery.fn.attr('"+l+"') may use property instead of attribute")),s.call(e,t,a,o))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?c.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?l.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value', val) no longer sets properties"),void(e.value=t))}};var p,f,H=e.fn.init,v=e.parseJSON,h=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;e.fn.init=function(t,n,a){var o;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(o=h.exec(t))&&o[1]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),n&&n.context&&(n=n.context),e.parseHTML)?H.call(this,e.parseHTML(e.trim(t),n,!0),n,a):H.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?v.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(f={},(p=e.uaMatch(navigator.userAgent)).browser&&(f[p.browser]=!0,f.version=p.version),f.chrome?f.webkit=!0:f.webkit&&(f.safari=!0),e.browser=f),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,a){return a&&a instanceof e&&!(a instanceof t)&&(a=t(a)),e.fn.init.call(this,r,a,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var m=e.fn.data;e.fn.data=function(t){var a,o,i=this[0];return!i||"events"!==t||1!==arguments.length||(a=e.data(i,t),o=e._data(i,t),a!==n&&a!==o||o===n)?m.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),o)};var g=/\/(java|ecma)script/i,y=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),y.apply(this,arguments)},e.clean||(e.clean=function(t,n,a,o){n=(n=!(n=n||document).nodeType&&n[0]||n).ownerDocument||n,r("jQuery.clean() is deprecated");var i,s,c,l,u=[];if(e.merge(u,e.buildFragment(t,n).childNodes),a)for(c=function(e){return!e.type||g.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):a.appendChild(e):void 0},i=0;null!=(s=u[i]);i++)e.nodeName(s,"script")&&c(s)||(a.appendChild(s),void 0!==s.getElementsByTagName&&(l=e.grep(e.merge([],s.getElementsByTagName("script")),c),u.splice.apply(u,[i+1,0].concat(l)),i+=l.length));return u});var b=e.event.add,w=e.event.remove,A=e.event.trigger,I=e.fn.toggle,R=e.fn.live,T=e.fn.die,B="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",j=new RegExp("\\b(?:"+B+")\\b"),k=/(?:^|\s)hover(\.\S+|)\b/,N=function(t){return"string"!=typeof t||e.event.special.hover?t:(k.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(k,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,a,o){e!==document&&j.test(t)&&r("AJAX events should be attached to document: "+t),b.call(this,e,N(t||""),n,a,o)},e.event.remove=function(e,t,n,r,a){w.call(this,e,N(t)||"",n,r,a)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return I.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,o=t.guid||e.guid++,i=0,s=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%i;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),a[r].apply(this,arguments)||!1};for(s.guid=o;i<a.length;)a[i++].guid=o;return this.click(s)},e.fn.live=function(t,n,a){return r("jQuery.fn.live() is deprecated"),R?R.apply(this,arguments):(e(this.context).on(t,this.selector,n,a),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),T?T.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,a){return n||j.test(e)||r("Global events are undocumented and deprecated"),A.call(this,e,t,n||document,a)},e.each(B.split("|"),(function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,(function(){e.event.trigger(n,null,t,!0)})),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}}))}(jQuery,window),jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ /]([w.]+)/.exec(e)||/(webkit)[ /]([w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([w.]+)/.exec(e)||/(msie) ([w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},jQuery.browser||(matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser),console.log("start."),$(document).ready((function(){function e(){v.attr("id",m),$(".tutorial").css({display:"none"}),v.removeClass("loading"),R.unmute(),R.play(),f.fadeIn("fast")}function t(){T.css({display:"none"}),c(m,"CH3_INTRO"),c(m,"CH3_INTRO_W"),d.add(C).add(_).add(p).fadeOut("fast")}function n(e){null!=e[b]&&e[b][2]>0?(W=l(e[b][2]),j=e[b][2]):(W="",j=0),null!=e[w]&&e[w][2]>0?(x=l(e[w][2]),k=e[w][2]):(x="",k=0),null!=e[A]&&e[A][2]>0?(Q=l(e[A][2]),N=e[A][2]):(Q="",N=0),0==K&&T.css({display:"block"}),null!==e[b]&&(C.fadeIn("fast"),C.html(e[b][1]+W)),null!==e[w]&&(_.fadeIn("fast"),_.html(e[w][1]+x)),null!==e[A]&&(p.fadeIn("fast"),p.html(e[A][1]+Q)),B<j?C.addClass("block"):C.removeClass("block"),B<k?_.addClass("block"):_.removeClass("block"),B<N?p.addClass("block"):p.removeClass("block"),function(e,t){e==t?(i(),T.html(O),T.css({display:"block"}),$("#tutorial-1").fadeIn(1e3),$("#tutorial-2").fadeIn(1e3),$("#tutorial-3").fadeIn(1e3)):$(".tutorial").css({display:"none"})}(m,"CH1_INTRO")}function r(e,t){return e[t][0]}function a(){v.addClass("loading"),t(),H.children()[0].src=y+m+g[0],H.children()[1].src=y+m+g[1],H.children()[2].src=y+m+g[2],R.load()}function o(e){if(B>=e){for(var t=0;t<e;t++)T.find("ul").find("li:nth-child("+(B-t)+")").addClass("empty");B-=e,e}}function i(){O="<ul>";for(var e=0;e<B;e++)O+="<li></li>";O+="</ul>"}$("#pa-q").css({display:"none"});var s=document.getElementById("player-btn--skip");function c(e,t){e==t&&(T.css({display:"none"}),K=1,s.style.display="none")}function l(e){var t;t='<section class="coins">',t+="<ul>";for(var n=0;n<e;n++)t+="<li></li>";return t+="</ul>",t+="</section>"}var u=document.getElementById("player--video"),d=$("#player-btn--begin"),C=$("#player-btn--a"),_=$("#player-btn--b"),p=$("#player-btn--c"),f=$("#player-btn--skip"),H=$("#player--video"),v=$(".player"),h=!1,m="CH1_INTRO",g=[".ogv",".mp4",".webm"],y="../videos/",b=0,w=1,A=2,I=3,R=new Popcorn("#player--video"),T=$("#coins"),B=6,j=0,k=0,N=0,O="",W=0,x=0,Q=0,K=0;document.getElementById("play-pause");H.on("loadstart",(function(e){$("#loader").show()})),H.on("canplay",(function(e){$("#loader").hide()})),f.on("click",(function(){"RIK7"!=m&&"CH5_ALT"!=m||(B=6,i(),T.html(O)),($.browser.safari&&"CH1_A0"==m||"CH1_A0_ALT"==m||"CH1_A1"==m||"CH1_A2"==m||"CH1_A3"==m||"CH1_B0"==m||"CH1_B1"==m||"CH1_B2"==m||"CH1_B3"==m||"CH1_C0"==m||"CH1_C1"==m||"CH1_C2"==m||"CH1_C3"==m||"CH1_INTRO"==m||"CH2_A0"==m||"CH2_A1"==m||"CH2_A2"==m||"CH2_B0"==m||"CH2_B1"==m||"CH2_B2"==m||"CH2_C0"==m||"CH2_C2"==m||"CH2_INTRO"==m||"CH3_A0"==m||"CH3_A0_W"==m||"CH3_A1"==m||"CH3_A1_W"==m||"CH3_A2"==m||"CH3_A2_W"==m||"CH3_B0"==m||"CH3_B0_W"==m||"CH3_B1"==m||"CH3_B1_W"==m||"CH3_C0"==m||"CH3_C0_ALT"==m||"CH3_C0_ALT_W"==m||"CH3_C0_W"==m||"CH3_C1"==m||"CH3_C1_W"==m||"CH3_C2"==m||"CH3_C2_W"==m||"CH3_INTRO"==m||"CH3_INTRO_W"==m||"CH4_A0"==m||"CH4_B0"==m||"CH4_B0W"==m||"CH4_B1"==m||"CH4_B2"==m||"CH4_INTRO"==m||"CH4_INTRO_W"==m||"CH4W_C0"==m||"CH5_A0"==m||"CH5_A1"==m||"CH5_A2"==m||"CH5_ALT"==m||"CH5_B0"==m||"CH5_C0"==m||"CH5_INTRO"==m)&&R.pause(),"CH1_A0"==m||"CH1_A0_ALT"==m||"CH1_A1"==m||"CH1_A2"==m||"CH1_A3"==m||"CH1_B0"==m||"CH1_B1"==m||"CH1_B2"==m||"CH1_B3"==m||"CH1_C0"==m||"CH1_C1"==m||"CH1_C2"==m||"CH1_C3"==m||"CH1_INTRO"==m||"CH2_A0"==m||"CH2_A1"==m||"CH2_A2"==m||"CH2_B0"==m||"CH2_B1"==m||"CH2_B2"==m||"CH2_C0"==m||"CH2_C2"==m||"CH2_INTRO"==m||"CH3_A0"==m||"CH3_A0_W"==m||"CH3_A1"==m||"CH3_A1_W"==m||"CH3_A2"==m||"CH3_A2_W"==m||"CH3_B0"==m||"CH3_B0_W"==m||"CH3_B1"==m||"CH3_B1_W"==m||"CH3_C0"==m||"CH3_C0_ALT"==m||"CH3_C0_ALT_W"==m||"CH3_C0_W"==m||"CH3_C1"==m||"CH3_C1_W"==m||"CH3_C2"==m||"CH3_C2_W"==m||"CH3_INTRO"==m||"CH3_INTRO_W"==m||"CH4_A0"==m||"CH4_B0"==m||"CH4_B0W"==m||"CH4_B1"==m||"CH4_B2"==m||"CH4_INTRO"==m||"CH4_INTRO_W"==m||"CH4W_C0"==m||"CH5_A0"==m||"CH5_A1"==m||"CH5_A2"==m||"CH5_ALT"==m||"CH5_B0"==m||"CH5_C0"==m||"CH5_INTRO"==m?(u.currentTime=u.duration-.5,R.mute(),R.play()):u.currentTime=u.duration})),C.add(_).add(p).fadeOut("fast"),d.on("click",(function(){!0,d.fadeOut("fast"),t(),a(),e(),i()}));var L=[];$.ajax({async:!1,url:"./scripts/videos_json/videos_structure.json",dataType:"json",success:function(e){L=e}}),$(window).resize((function(){v.css("height",window.innerHeight)})).resize(),u.addEventListener("ended",(function(){if("RIK7"!=m&&"CH5_ALT"!=m){f.fadeOut("fast"),h=!1,function(e,t){if(void 0!==e[I]&&"W"===e[I].slice(-1)){var n=e[I];L.CH3_C1[b]=n,L.CH3_C2[b]=n,L.CH3_A2[b]=n,L.CH3_B1[b]=n}"CH2_A0"===t?L.RIK1[b][0]="RIK2_1":"CH2_B0"===t?L.RIK1[b][0]="RIK2_2":"CH2_C0"===t&&(L.RIK1[b][0]="RIK2_3"),"CH4_A2"===t?L.RIK3[b][0]="RIK4_1":"CH4_B2"===t&&(L.RIK3[b][0]="RIK4_2"),"CH5_A0"===t?L.RIK4_1[b][0]="RIK6_1":"CH5_B0"===t?L.RIK4_1[b][0]="RIK6_3":"CH5_C0"===t&&(L.RIK4_1[b][0]="RIK6_2"),"CH5_A0"===t?L.RIK4_2[b][0]="RIK6_1":"CH5_B0"===t?L.RIK4_2[b][0]="RIK6_3":"CH5_C0"===t&&(L.RIK4_2[b][0]="RIK6_2")}(L[m],m);for(var t=L[m].slice(),i=0;null===t.pop();)i++;return 2===i?(m=r(L[m],b),a(),void e()):(n(L[m]),C.one("click",(function(){C.hasClass("block")||h||(h=!0,m=r(L[m],b),a(),o(j),v.addClass("loading"),e(),v.removeClass("loading"))})),_.one("click",(function(){_.hasClass("block")||h||(h=!0,m=r(L[m],w),a(),o(k),v.addClass("loading"),e(),v.removeClass("loading"))})),void p.one("click",(function(){p.hasClass("block")||h||(h=!0,m=r(L[m],A),a(),o(N),v.addClass("loading"),e(),v.removeClass("loading"))})))}})),u.addEventListener("timeupdate",(function(e){u.duration<u.currentTime+2&&"none"==$("#pa-q").css("display")&&("RIK7"!=m&&"CH5_ALT"!=m||$("#pa-q").show())}),!1)})).resize();